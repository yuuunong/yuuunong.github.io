---
title: "[토이프로젝트] 2차 애자일 트러블슈팅"
#   date: YYYY-MM-DD HH:MM:SS +/-TTTT
categories: [Dev, SKN Family AI Camp]
tags: [Toy_project]     # TAG names should always be lowercase
author: <author_id>
# description: Short summary of the post.
---

## 1. LLM 토큰 사용량
DB에 저장된 내용을 기반으로 LLM에게 생성 요청 할 때 DB 전체 내용을 프롬프트에 삽입으로 인해 과도한 토큰 사용 발생

groq api 무료 사용량은 분당 6000토큰이지만 위의 요청 한번에 최소 2000 이상의 토큰 발생

토큰 사용량 절약할 필요 대두

### 해결방법
커리큘럼 입력 내용을 토큰화 한 후 명사만 추출하여 프로므트에 삽입

-> 약 1000 토큰 사용으로 기존 대비 50% 토큰 절약


## 2. 백엔드 빌드 시간
백엔드서버 실행 시 임베딩 모델 intfloat/multilingual-e5-large를 사용하는데 모델이 무거워서 임베딩 빌드 시간이 5분 이상 소요

백엔드 코드 수정할 때마다 임베딩 빌드를 해서 개발에 불편을 초래

임베딩 벡터 데이터를 저장할 DB 필요

하지만 토이프로젝트에서 사용하는 DB는 MySQL로써 벡터데이터 저장을 지원하지 않음

### 해결방법
기존 또는 추가되는 내용의 벡터데이터를 faiss.bin 바이너리 파일에 저장.

-> 백엔드 서버 실행시 임베딩 빌드 시간 줄임

### 한계
다른 컴퓨터에서 추가된 내용이 있을 시 임베딩 빌드를 해야함

-> 3차 애자일에서는 클라우드 벡터 DB 서비스를 이용하는 방향으로 생각

## 3. 영어와 한국어 개별 인식
임베딩 모델이 다국어 모델임에도 불구하고 알파벳으로 쓴 글과 한글로 쓴 글이 유사도가 낮음 (예: python, 파이썬 -> 임베딩 모델은 다른 단어로 인식한다.)

### 해결방법
구글번역기 api를 사용해 내용을 영어로 번역 후 임베딩 작업함.

### 한계
너무 1차원적인 해결방법. 뭔가 더 좋은 해결방법이 존재하지 않을까
